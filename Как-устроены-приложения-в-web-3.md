### Краткий ответ на вопрос

Есть блокчейн = книга учёта контрактов и балансов. Абсолютно вся логика работы приложения хранится в блокчейне или заключается во взаимодействии с ним.

При запросе посетителя сайта на взаимодействие с любым контрактом браузер перехватывает управление и спрашивает подтверждение, выводя код той функции контракта, которая фактически будет вызвана. (Если подтверждение не запрашивается - это недобросовестный сайт, не запрашивающий на самом деле взаимодействие с контрактом, и, получается, размещающий ваши данные не распределённо, а где-то у себя на VPS, и в любой момент имеющий возможность их изменить.)

Есть VPS, на котором хранятся исходники сайта приложения. Сайт приложения - это просто такой интерфейс для контрактов, которые хранятся распределённо. Разработчик может изменять интерфейс сайта, но, как и все контракты в блокчейне, тот контракт, на котором базируется логика работы приложения, неизменяем.

### Два принципиально разных случая

Авторы Ethereum делают специальный браузер Mist, который умеет как открывать обычные веб-страницы, так и работать с контрактами. В Mist будет Dapp Store (dapp = decentralized app), попадать куда выгодно; модерируют Dapp Store код-аудиторы, которые будут подтверждать, что интерфейс действительно соответствует содержанию кода, и проставлять рейтинг приложениям по параметру trustworthy от 1 до 10. Поэтому у Ethereum-разработчика есть две опции:

* Делать свой сайт для приложения
* Дожидаться релиза Dapp Store

Поскольку нет ощущения, что авторы успеют сделать Dapp Store к запуску платформы и что Ethereum-жизнь будет крутиться в основном вокруг этого Dapp Store, здесь будет рассматриваться только первый случай.


### Para-para-paradigm

Труъ-парадигма выглядит так: все сервисы должны быть trustless - пользователь должен иметь все инструменты проверить, что на самом деле делает нажатие на ту или иную кнопку. Как устроены такие сервисы? 

Вроде бы для полного trustless достаточно 1) прозрачности бекенда 2) способа убедиться, что нажатие той или иной кнопки вызывает именно декларируемую функцию бекенда.

##### Прозрачность логики

Вся серверная логика хранится в контракте или контрактах, все контракты планеты хранятся в блокчейне, блокчейн хранится у каждого желающего (и по определению публичен). (Автор контракта, конечно, может его обфусцировать перед добавлением в блокчейн, но тогда это обычный web 2 и кто будет пользоваться таким контрактом.) У контракта есть т.н. хранилище, представляющее собой одномерный массив с up to 2^256 элементами: contract.storage[0] и так далее, но, если приложение должно хранить большие объёмы данных (например, картинки), разумнее отправлять их в Swarm (to prevent the abuse, за операции присваивания, да и вообще за любые модифицирующие блокчейн операции майнеры берут комиссию пропорционально количеству вычислений). Хостить сайт приложения можно традиционно, можно в Swarm (разница между хранением сайта на VPS и в "децентрализованном Dropbox'е" появляется лишь для сомнительных сервисов - для сайта вроде The Pirate Bay VPS может быть волюнтаристски отозван). 

###### Таки что такое Swarm?

На базе Эфириума можно написать контракт а-ля "децентрализованный Dropbox". Это не очень просто; авторы платформы сочли такой контракт исключительно важным и выделили в отдельный проект, который назвали Swarm. (По последним слухам, разработку Swarm приостановили.) Если это будет реализовано (в любом случае, после запуска платформы Swarm-контракт сможет написать любой компетентный желающий), то это будут такие незатыкаемые торренты, файлопомойка принципиально без возможности цензуры. (Каждый может сдавать куски своего жёсткого диска в аренду за небольшое количество криптовалюты - привет, кстати, облачное хранение данных. Файлы хранятся в зашифрованном виде, ты не можешь выбирать, что хранить. Сохранность файлов обеспечена избыточностью: технологией secret sharing, которая умеет делать из файла n зашифрованных частей так, что достаточно m из них, чтобы полностью восстановить содержимое файла.)

Когда говорят, что web 3 - это веб без серверов, имеют в виду именно комбинацию блокчейн+Swarm. Сейчас будут пояснены детали. 

##### Всё есть то, чем кажется

Теперь следует рассказать, как пользователь будет защищён от фишинга - возможного обмана вида "нажми на невинную кнопочку, чтобы перевести нам все свои средства". Очень просто: при попытке передачи любых аргументов любому добавленному в блокчейн контракту Mist выводит на экран код фактически вызываемой функции контракта и спрашивает о подтверждении операции. 

### О любопытных особенностях первого рода

Любопытный момент: как только контракт (а контракт наш, напомню, содержит код бекенда) создан, т.е. отправлен в блокчейн, автор теряет какую-либо возможность вносить в него изменения (если такая возможность в самом коде хитрым образом не прописана). (Взаимодействие со всяким контрактом происходит путём пересылки ему "на вход" параметров.) Ещё раз - the contract code is immutable. Это означает, что единственная возможность внести изменения не в интерфейс, а в логику - создать новый контракт (создать - это то же самое, что добавить в блокчейн) и заменить в фронтенд-исходниках адрес старого на адрес нового. (Немного похоже на Git.) Поэтому следует разделять логику и данные по разным контрактам, так чтобы разработкой можно было заниматься, не боясь потерять данные. 

Для внедрения новых фич, впрочем, вроде бы незачем менять другие контракты - просто пишется новый и на сайте пририсовывается соответствующий функционал.

Сейчас вся логика через AJAX-запросы к серверу, а в Ethereum будет логика через web3-запросы к разным контрактам и, если зачем-то нужно, данным блокчейна.

###### Если разработчик имеет возможность менять фронтенд, то, получается, он может меня обмануть, как в web 2?

Наивно кажется что да, вот вы пользовались сервисом какое-то время, делали депозиты - скажем, если речь идёт о криптовалютной бирже или покерруме - и в одно прекрасное утро обнаруживаете, что на сайте нет больше никакой функциональности, есть только фотография котика во всю главную. Такая ситуация вполне возможна в web 2 - все мы помним крах биржи MtGox с 880000 биткойнами на счету (800 миллионов долларов по курсу на тот момент). 

Однако сайты в web 3 - просто такая прокладка между юзером и собственно кодом сервиса, делающая работу с сервисом чуть удобнее. Весь тот же функционал, что был на сайте, доступен, потому что код сервиса как жил, так и живёт в блокчейне; блокчейн хранится распределённо и уже загруженные туда контракты неизменяемы (если совсем точно, ни одна сторона не может внести в него изменения, если с ними не согласны другие узлы). Поэтому в случае прекращения работы сайта, принимавшего ваши деньги, эти деньги по-прежнему можно извлечь, отправив withdraw-запрос на соответствующий контракт.

### And if you want that kind of dream, it's dapp monetization

Может возникнуть резонный вопрос - как в условиях открытой архитектуры можно что-либо монетизировать? Условно говоря, если ты написал сервис, который берёт комиссию 0.2%, то, поскольку в web 3 всё прозрачно, приходит дядя Демпинг и тут же запиливает копию, которая берёт уже 0.1% комиссии.

Ответ, очевидно, в том, чтобы скрыть код всего, что не отвечает за честность. Т.е. внешний вид веб-страницы приложения, если таковая у него есть; appearance. Прозрачные части фронтенда, по сути, и не нужны (как обычно, получающийся в результате работы интерпретатора HTML-код трудно считать частью фронтенда) - прозрачность включается только в тот момент, когда пользователь пытается заставить находящиеся в блокчейне контракты что-то делать (если пользователь нажал на кнопку, которая предполагает вызов некоторой функции некоторого из контрактов, браузер выведет на экран точный код функции, которую пользователь вызывал или думал что вызывает; подтвердить решение можно нажатием кнопки "ОК").

Как итог - все ресурсы будут визуально разными, и это ли не здорово.