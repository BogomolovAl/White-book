Англоязычный оригинал [здесь](https://github.com/ethereum/wiki/wiki/Problems).

## Трудные задачи криптоэкономики

Созданный Сатоши Накамото Биткойн — поистине удивительное изобретение. В то время как исследования в криптографии с 1980-ых погружались всё глубже и глубже в пучину сложности и неясности, развивая протоколы, основанные на таких конструкциях, как [решётки идеалов](http://en.wikipedia.org/wiki/Ideal_lattice_cryptography), спаривания на эллиптической кривой и [полностью гомоморфное шифрование](http://ru.wikipedia.org/wiki/%D0%93%D0%BE%D0%BC%D0%BE%D0%BC%D0%BE%D1%80%D1%84%D0%BD%D0%BE%D0%B5_%D1%88%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5#.D0.9F.D0.BE.D0.BB.D0.BD.D0.BE.D1.81.D1.82.D1.8C.D1.8E_.D0.B3.D0.BE.D0.BC.D0.BE.D0.BC.D0.BE.D1.80.D1.84.D0.BD.D0.BE.D0.B5_.D1.88.D0.B8.D1.84.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5), Биткойн смог решить проблему 30-летней давности в computer science, используя лишь хэши и публичные ключи. Однако при том, что Биткойн-протокол — открытие просто потрясающее, это лишь проба пера, "первый блин" в истории криптоэкономики. С момента запуска сети Биткойн прошло более 5 лет, за которые мы многое поняли о том, как криптовалюта и децентрализованное соглашение могут быть улучшены. Никуда не делись пока что проблемы централизации майнинга, масштабируемости, а также сложности с развитием приложений более высокого уровня, таких как системы репутации. Большинство из этих проблем только ждут фундаментального прорыва, который смог бы стать по-настоящему эффективным решением той или иной из них.

Цель этого документа — выявить проблемы децентрализованных структур и аспекты, которые могли бы быть улучшены, слепив из них набор достаточно строго сформулированных "задач". Некоторые из этих задач проще, некоторые тяжелее, какие-то уже почти решены, а о каких-то сообщество ещё и не начинало думать. Некоторые из них — задачи, имеющие определённый ответ, некоторые — с совершенно произвольной формой ответа. Каждая из них, тем не менее, является вызовом, и будущее криптовалют и технологии децентрализованного соглашения во многом зависит от успешности их решения.

### Введение

Мы всегда работаем в каком-то предположении, в рамках какой-то модели. В традиционной криптографии они имеют такой вид:

1. Никто не может проделать более чем 2<sup>79</sup> вычислительных шагов.
2. Разложение на множители трудновыполнимо (сверхполиномиально во времени = не существует полинома, который бы ограничивал его сверху). Примеры сверхполиномиальных задач — имеющие время выполнения 2<sup>n</sup>, n<sup>log log n</sup> (n — параметр битов, поданных на вход).
3. Taking nth roots modulo composites is hard
4. The elliptic curve discrete logarithm problem cannot be solved faster than in 2<sup>n/2</sup> time

В криптоэкономике (т.е. в ситуации, когда у нас уже есть криптовалюты), предположения таковы:

1. Лица, владеющие более чем 25% вычислительных мощностей сети, не могут договариваться
2. Лица, владеющие более чем 25% всей валюты, не могут договариваться
3. The amount of computation of a certain proof of work function that can be accomplished with a given amount of money is not superlinear beyond a point which is reasonably low
4. Существует какое-то количество альтруистов и какое-то количество лиц, стремящихся эту систему уничтожить. Решения большинства же будут экономически рациональны.
5. Число пользователей велико, пользователи могут появляться и покидать сеть в любой момент времени, но хотя бы некоторые не выходят никогда.
6. Цензура невозможна
7. Те, кому нужно, с лёгкостью могут нагенерировать себе сколько угодно IP-адресов, а также приобрести трафик неограниченно широкой полосы пропускания
8. Большая часть пользователей анонимны, так что отрицательные очки репутации и долги не беспокоят этих пользователей

### Технология

Технология, на которой основан Биткойн, является крайне впечатляющей в том числе по причине своей простоты. Проблема 30-летней давности в computer science была решена простым во внедрении и настолько простым для понимания способом, что даже некоторые подростки могут объяснить принцип работы протокола во всей полноте. Однако в то же время эта технология в своей текущей форме достаточно сильно ограничена. Не продумана масштабируемость Биткойна; тот факт, что каждая полная нода должна проводить каждую транзакцию является серьёзным препятствием на пути к успеху платформы и фактором,  the fact that every full node needs to process every transaction is a large roadblock to the future success of the platform, and a factor preventing its effective use in micropayments (arguably the one place where it is the most useful). Timestamping is flawed, and proof-of-computation algorithms are very limited in the types of computation that they can support. Тот факт, что исходное решение было столь "простым" уже сам по себе означает, что его есть куда улучшать, и далее в этом документе описываются направления, в которых улучшение необходимо. 

#### 1. Масштабируемость блокчейна

Одной из главных проблем мира криптовалют сейчас является масштабируемость. Есть расхожее утверждение, что если мейнстримовые платёжные сети (Visa, Mastercard *(ведь именно они, не Paypal?)*) проводят порядка 2000 транзакций в секунду, в своей текущей форме сеть Биткойн может производить только 7. Это не фундаментальное ограничение — изменив block size limit, Биткойн сможет поддерживать 70 и даже 7000 транзакций в секунду. *(А сколько транзакций в секунду на данный момент ему нужно, сколько происходит? Мы уже упираемся сейчас в этот лимит?)* Проблема в том, что тогда среднестатистический пользователь не сможет запустить полную ноду, потому что она раздуется до терабайтов. Полную ноду сможет держать лишь ограниченное количество бизнесов, могущих себе позволить расходы. Поскольку для майнинга не нужно загружать весь блокчейн (достаточно заголовка предыдущего блока), майнеры также не будут держать полную ноду (и сейчас большинство не держит). 

Понятно, почему сообщество этим обеспокоено: если крайне малое количество лиц будут держать полную ноду, они могут вступить в сговор и перерисовать блокчейн(=единственное место учёта транзакций, определяющее балансы всех пользователей) как им вздумается, и другие пользователи не смогут убедиться, что блок невалиден, не обсчитывая *(?)* его самостоятельно. Хотя такое мошенничество может быть обнаружено,  . Таким образом, Биткойн с 7000 транзакциями в секунду примерно настолько же безопасен, децентрализован и независим, как Paypal, в то время как то, чего мы хотим — систему с 7000 транзакциями в секунду того же уровня децентрализации .


Понятно, что если полную ноду в состоянии будут держать лишь малое количество людей, атака 51% неизбежна.




Идеальным решением был бы такой блокчейн, который работает даже в условиях, когда никакая отдельно взятая нода не проводит более чем `1/n` транзакций, где `n` может быть взято почти каким угодно.

**Проблема:** создать блокчейн

**Дополнительные допущения и требования:**

* Майнеров в сети много
* Майнеры могут использовать специализированное и неспециализированное оборудование. Специализированное следует полагать примерно в 10000 раз более мощным для конкретных задач.
* Обычные пользователи будут использовать неспециализированное оборудование


#### 2. Таймштампинг

Важным свойством протокола Биткойна является то, что нахождение одного блока в среднем занимает 10 минут; если бы поиск блока занимал день, платежи бы осуществлялись слишком медленно (платежи всегда осуществляются не раньше, чем будет найден следующий блок); если бы блоки генерировались каждую секунду, проблемы централизации и сетевой эффективности сделали бы систему нежизнеспособной даже в отсутствие злоумышленников и их любви к "атаке 51%". Чтобы добиться значения block time в 10 минут, сеть Биткойн раз в две недели производит подстройку сложности — если нахождение блоков стало слишком быстрым, сложность увеличивается, если слишком медленным, сложность уменьшается. 

#### 3. Создать произвольный proof-of-computation

#### 5. Защититься от квантовых компьютеров

Одной из смутных угроз всем современным криптовалютам, и криптографии в целом, является квантовый компьютер. На данный момент угроза не кажется серьёзной; на июль 2014 года все квантовые компьютеры — либо "адиабатические квантовые компьютеры", эффективные только для крайне ограниченного круга задач и, возможно, не более эффективные для них, чем обычные компьютеры, либо машины с крайне малым числом кубитов, неспособные разложить на множители число выше 35. В будущем, однако, квантовые компьютеры могут стать намного более мощными; недавние разоблачения активности правительственных агентств, таких как АНБ, породило опасения (правда, маловероятные), что американские военные уже могут контролировать квантовый компьютер. Имея это в виду, понятно, почему [защищённая от квантовых компьютеров криптография](http://en.wikipedia.org/wiki/Post-quantum_cryptography) становится всё более приоритетной.


#### Создать PoW, который будет centralization-resistant

Предположим, в системе `n` нодов. Тогда злоумышленник может создать `5n` нодов и получить контроль над сетью. Единственный известный выход здесь — вклад, базирующийся на ресурсах.

### Децентрализованное соглашение

В Биткойн, однако, узлы многочисленны, анонимны, и могут появляться в системе и исчезать в любой момент. Если тщательно не продумать этот момент, 

Proof-of-Work-алгоритм Биткойн — это в точности изобретённая Адамом Бэком в 1995 году концепция [Hashcash](http://en.wikipedia.org/wiki/Hashcash). Принцип её работы таков:
```
def hashcash_produce(data, difficulty):
    nonce = random.randrange(2**256)
    while sha256(data + str(nonce)) > 2**256 / difficulty:
        nonce += 1
    return nonce

def hashcash_verify(data, nonce, difficulty):
    return sha256(data + str(nonce)) <= 2**256 / difficulty
```
Заметим, что в протоколе Биткойн nonce ограничены 32 битами

Биткойн была задумана как равноправная. Любой желающий мог заниматься майнингом на обычном процессоре (CPU), что привело к сети высокой степени децентрализации без какой-либо "точки контроля" и распределению валюты среди широкого круга пользователей. В течение первых 18 месяцев существования сети это было действительно так. Летом 2010-го, однако, появилась программа-майнер на видеокартах (GPU). Майнинг на современных видеокартах оказался в 10-50 раз более эффективен, чем на процессорах, за счёт высокой степени параллелизации . В 2013-ом в Биткойн-майнинге наступила новая эра — эра доминирования устройств, названных "application-specific integrated circuits" (ASICs, АСИКи). АСИК — это кремневый чип, изготовленный специально для майнинга биткойнов. Майнинг на процессорах и видеокартах сейчас полностью убыточен, и единственный способ майнить — основать свою компанию, производящую АСИКи, или просто купить АСИК

Another related issue is mining pool centralization. 

#### 6. ASIC-resistant Proof of Work

Один из подходов, решаю, заключается в создании PoW-алгоритма, базирующегося на трудноспециализируемом типе вычисления. Другая идея заключается в создании "требовательной к памяти" функции хеширования, что значительно усложнило бы создание АСИКа. Идея эта проста, но фундаментально ограничена — если функция нуждается в большом количестве памяти для вычисления, как правило, для проверки такого вычисления также нужно очень большое количество памяти. Кроме того, возможны специализированные устройства, основанные не только на идее гиперпараллелизации. Другой подход — случайно генерировать майнинг-алгоритмы каждый блок, пытаясь сделать выгоду от специализации оборудования невозможной, потому АСИК, подходящий для выполнения произвольных вычислений — это, по определению, обычный процессор. Помимо этих двух, возможны ещё какие-то стратегии.

В конечном счёте, полная ASIC-resistance невозможна; у любого алгоритма всегда есть какие-то "нехоженные тропы", которые можно обрезать для сокращения стоимости спецоборудования. Однако то, чего нам хотелось бы — не полная защита от АСИКов, а скорее экономическая. Дадим определение последней.

Для более глубокой дискуссии on ASIC-resistant hardware, see [https://blog.ethereum.org/2014/06/19/mining/](https://blog.ethereum.org/2014/06/19/mining/)

**Problem**: Придумать две функции `PoWProduce(data,diff) -> nonce` и `PoWVerify(data,nonce,diff) -> { 0, 1 }`, которые могли бы быть альтернативой Hashcash, такие, что производство АСИКа для `PoWProduce` экономически непривлекательно.

#### 7. Полезный Proof of Work

Недоброжелатели Биткойна любят подчёркивать, что проделываемые майнерами для поддержки работы сети вычисления являются пустой тратой электроэнергии. Майнинг заключается в том, что майнеры (=те, кто занимаются майнингом; заняться им может любой желающий) круглыми сутками вычисляют на своём оборудовании SHA256 (или scrypt, или других алгоритмов)-хэши (совокупная мощность биткойн-майнеров на июль 2014 имеет порядок 10<sup>17</sup> хэш/с), пытаясь подобрать подходящий (являющийся достаточно малым как 16-ричное число) хэш и [получить за это награду](https://en.bitcoin.it/wiki/Controlled_supply#Currency_with_Finite_Supply), и абсолютно вся эта работа не несёт никакой пользы мировому сообществу. Традиционные централизованные сети, такие как PayPal, Visa, Mastercard, обходятся вообще без proof-of-work-вычислений, в то время как в экосистеме Биткойн на электричество и оплату специализированных устройств тратится порядка миллиона долларов в день.

Один из часто обсуждаемых способов решения проблемы — сделать функцию proof-of-work осуществляющей полезные вычисления. Стандартный пример здесь — Folding@home, проект, предлагающий всем желающим загрузить на свой компьютер ПО, симулирующее фолдинг белка, проделать вычисления, переслать результаты учёным и тем самым помочь им в понимании, а, следовательно, и в излечении болезней. Проблема здесь в том, что добросовестность вычислений Folding@home нельзя быстро проверить; проверка того, что вычислявший "не срезал углы" для увеличения демонстрируемой скорости, занимает в точности столько же, сколько само вычисление. Если получится придумать быстропроверяемую функцию proof-of-work для Folding@home, или если удастся найти другое полезное вычисление, проверка которого занимала бы гораздо меньше времени, чем само вычисление, майнинг криптовалют станет огромным благом для общества, социально полезным явлением, навсегда оставив в прошлом возражение "майнинг расходует электроэнергию".

Но тут есть такое соображение: если полезный PoW будет полезен для узкого круга лиц (а не абстрактных "нужд науки"), это уменьшит стоимость потенциальной атаки на сеть. Если конкретная реализация полезного PoW окажется полезной в том смысле, что узкому кругу лиц с большими возможностями будет выгодно проделывать вычисления даже вне контекста криптовалютных выплат, то стоимость атаки на сеть для таких лиц будет равной нулю, поскольку им в любом случае выгодно производить вычисления. Простой, и в то же время грубый, неидеальный, способ решения этой проблемы — сделать PoW наполовину полезным и наполовину бесполезным, что, возможно, увеличит стоимость такой атаки. In practice, the overhead of making PoW verifiable may well introduce over 2x inefficiency unintentionally. Другое решение — придумать PoW, при котором результаты вычислений являются "чистым" общественным благом, чем-то, от чего профит получают не отдельные люди, а человечество. Предлагаемое решение должно включать в себя строгий анализ того, кому предлагаемый PoW-механизм мог бы быть выгоден.

**Задача**: Создать две функции, `PoWProduce(data,diff) -> nonce` и `PoWVerify(data,nonce,diff) -> { 0, 1 }`, которые стали бы успешной альтернативой для [Hashcash](http://en.wikipedia.org/wiki/Hashcash), такие, что результат вычисления `PoWProduce` полезен не только для поддержки работы криптовалютной сети.

**Допущения и требования**:

* Ожидаемое время выполнения `PoWProduce` должно быть линейно по `diff` (сложности)
* Ожидаемое время выполнения `PoWVerify` должно быть не более чем [полилогарифмическим](http://en.wikipedia.org/wiki/Time_complexity#Polylogarithmic_time) по `diff`
* Выполнение функции `PoWProduce` должно быть наиболее эффективным способом найти `nonce`, которое даёт `1` при подстановке в `PoWVerify` (т.е. проходит проверку)
* `PoWProduce` должна быть не более чем линейна по вычислительной мощности и времени; именно, ожидаемое число успешных (т.е. давших подходящее `nonce`) вычислений `PoWProduce`, продолжавшихся `t` секунд на оборудовании, стоимость которого составила `N` долларов, должно быть ограничено `kNt` для некоторого `k`. Более того, линейность должна "умереть" очень быстро (в реальности работающее круглые сутки оборудование достаточно быстро изнашивается и перестаёт работать со 100% заявленной эффективности).
* `PoWProduce` должно производить такое общественное благо, что для каждого (адекватного) человека его ценность выше стоимости всех затраченных на майнинг ресурсов.
* Система должна быть жизнеспособна без наличия третьих лиц, которым участники доверяют, но вполне разумно было бы позволить таким третьим лицам служить источником данных для полезных вычислений. Если эти третьи лица в дальнейшем вызовут хотя бы малейшие подозрения, предоставление общественного блага может быть окончено, но блокчейн и сам процесс майнинга не должны быть подвергнуты опасности.


#### 8. Proof of Stake

Другой подход к решению проблемы централизации майнинга — полностью отказаться от PoW-майнинга, выбрав другой способ проведения транзакций. На данный момент (июль 2014) наиболее популярной альтернативой является "proof-of-stake".

Вид способа проведения транзакций | Вероятность нахождения майнером нового блока пропорциональна... 
------------ | ------------- 
Proof of Work | ...вычислительной мощности
Proof of Stake | ...количеству уже имеющихся монет


На первый взгляд, у этого алгоритма есть все необходимые свойства: у каждого майнера каждую секунду есть некоторый шанс на успех, и этот шанс пропорционален количеству денег на счету майнера.

Но у этого алгоритма есть один важный недостаток: на кону не стоит ничего (there is "nothing at stake"). В случае создания форка блокчейна — случайной или преднамеренной попытки сделать боковое ответвление длиннее исходного и тем самым переписать историю, обратить транзакцию — оптимальная стратегия для каждого майнера в том, чтобы майнить на каждой из цепей, т.к. так майнер получит награду, какая бы цепь ни победила (валидной является лишь самая длинная цепь). (Это с лёгкостью возможно, потому что PoS-майнинг не требует практически никакой вычислительной мощности.) Полагая, что поведение большинства майнеров рационально, делаем вывод: злоумышленник может оплатить какой-то цифровой товар (обычно другую криптовалюту), получить его, начать майнить форк блокчейна, в котором вместо транзакции, пересылающей деньги за цифровой товар, транзакция, в которой он пересылает деньги на другой свой кошелёк *(зачем она нужна, кстати?)*, и даже владея 1% от полного количества этой валюты, форк злоумышленника победит *(победит ли?)*, поскольку майнеры будут одновременно майнить на обоих.

Другая проблема — так называемые "атаки дальнего действия", когда майнер начинает майнить форк не с пятого и не с десятого блока назад от текущего, а с `(номер текущего блока) - 100000`-го. В рамках парадигмы PoW-майнинга никто так делать не будет, т.к. так сделать свой форк блокчейна самым длинным практически невозможно. В случае PoS-майнинга, если алгоритм выбран не слишком удачно, злоумышленник может начать издалека и намайнить миллиарды блоков (поскольку никакого proof-of-work не требуется), и новые пользователи не смогут понять, какой из блокчейнов легитимен. Эта проблема может быть решена таймштампами, но патологические случаи всё равно возможны при некоторых не слишком удачных PoS-алгоритмах.



Для более глубокого обсуждения proof-of-stake см. [https://blog.ethereum.org/2014/07/05/stake/](https://blog.ethereum.org/2014/07/05/stake/)

**Задача:** создать proof-of-stake алгоритм, решающий "nothing-at-stake"-проблему и проблему атак дальнего действия, причём этот алгоритм не должен давать лицам, суммарно обладающим менее чем 25% валюты, новых возможностей провести атаку с выгодой для себя, вступив в сговор.

**Дополнительные требования и допущения:**

* Ожидаемый 
*


#### 9. Proof of Storage

### Экономика

Той из частей криптоэкономики, в которой решения гораздо тяжелее проверить или просчитать, является, очевидно, экономика. Криптовалюты — это не просто криптографические системы, это также экономические системы, и они должны быть безопасны с каждой из этих двух сторон. Иногда криптографическую безопасность можно подвергнуть большему риску ради экономического удобства — если затраты на взлом цифровой подписи превышают выгоду взлома, это является вполне подходящей заменой полной безопасности. В то же время экономические проблемы гораздо сложнее определить. Нельзя до проведения интенсивных экспериментов твёрдо знать, решена та или иная проблема или нет, ведь результат часто зависит от культурных факторов, организационных и социальных структур, в которые вовлечены участники. Однако решения таких экономических проблем могут дать нам гораздо больше, чем криптовалюту.

#### 10. Создать криптоактив со стабильной ценой

Одной из главных проблем Биткойна является волатильность цены. (Это отпугивает широкие массы.) Стоимость 1 BTC по отношению к доллару часто испытывает очень большие флуктуации, возрастая или падая на 25% за день, или возрастая на 300% за месяц. Основная причина этого в том, что количество биткойнов строго фиксировано, так что цена прямо пропорциональна спросу (and therefore, by efficient market hypothesis, the expected discounted future demand), а спрос крайне непредсказуем. Неизвестно, будет ли Биткойн нишевым платёжным средством для проведения транзакций высокой степени приватности, заменой Western Union, мейнстримовой платёжной системой или резервной мировой валютой, —  и ожидаемая стоимость биткойна для людей, думающих на этот счёт по-разному, как вы понимаете, различается в тысячи раз. 

Для решения этой проблемы есть два пути. 


**Проблема**: построить криптоактив со стабильной ценой.


Видны два пути решения этой проблемы:


1. Научить сеть делать допэмиссию валюты, если спрос увеличивается.
2. 


#### Создать PoS-валюту

Вместо <<one unit of CPU power, one vote>> <<one currency unit, one vote>>.


#### Создать proof-of-human-work концепцию распределения валюты

Несправедливость: даже ПК наиболее бедных людей хуже (подходят для майнинга). Выход: PoW, но of human work, человеческого труда.


#### Создать proof-of-excellence концепцию распределения валюты, в которой выплаты происходят за решение важных проблем


#### Обеспечить синхронизированность времени на компьютерах пользователей